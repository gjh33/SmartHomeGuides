# Makine An Easy To Maintain Smart Home With Home Assistant
As a professional programmer, something that's very important when building any system that is subject to change is to make it easy to change. Home Assistant by default does a terrible job of this and I found no other guides on this topic, leaving me to figure it out for myself. Let's start with talking about what makes a system easy to maintain. For my fellow programmers out there, you can skip this next section.

## What Makes A Maintainable System
While programming has many ways to define a maintainable system, Home Assistant comes down to two principles. While I can't teach you every single trick to make your home maintainable, I can give you some goals that will lead you in the right direction. Home Assistant isn't well equipped for these principles, and at the end I'll talk about some features that could help.

The first principle is "decoupling". Decoupling simply means that something in your smart home, shouldn't rely on too many other things in your smart home. For example, if you remove a light bulb from your home, and have to then modify or remove 50 automations, that's a very high coupling. If I replace a Yeelight with a LIFX bulb and all my automations break, that's a high coupling. Conversely my smart home is decoupled if changing out a light bulb, only requires editing one config file (yes, that is the goal we will achieve).

The second principle is "D.R.Y." which stands for "Don't Repeat Yourself". This principle is all about minimizing copy and paste. For example, let's say we want to enable our google speakers to tell us when our food order is on the way for a given room in our house. We could make an automation for each room, that is essentially a copy paste, then toggle those automations on/off per room. Or we could make one automation that uses helpers to toggle which speakers get notified. If we swap out a speaker for a new one, the first solution would require us to go into each automation and update that entity. The latter would require us to only update one automation. Note that in both scenarios, this automation is coupled to the speakers. It relies on those speakers and if the speakers change we have to change the automations. We can do better here too, and we'll cover that later.

## Tricks For A Maintainable Home Assistant
Here I'll go over some concrete ways I've found to keep your home more maintainable

### Entity Aliases
One of my first major annoyances was whenever I had to replace my cheap teckin bulbs. Swapping out a bulb involved going into the Smart Life app, adding the new bulb, deleting the old bulb, syncing my google home (we'll get there later), reloading my home assistant integration, going over and finding all automations and UI that referenced that bulb and updating those references to the new bulb. It was a HUGE pain just to change a lightbulb. This is not the smart home I was promised. So I thought, well how do we do this in programming. We'd make a variable. It doesn't matter what the value of that variable is, as long as it's the right type of thing, we can use that variable name in our code. The same principle applies to smart homes. Wouldn't it be great, if we could define a name for a light, and then tell home assistant what physical entity that light is right now? Then in all our automation we can reference that name. If we were to swap out the physical bulb, we just tell home assistant that name is now pointing to a different bulb. All our automations use the name, so we only had to change one reference! Well we can do exactly this. The first thought was "man wouldn't it be great if home assistant had aliases?". Well tough. It doesn't. But i has a few features that act as aliases.

If you're able to define your entity id without breaking your integrations, then you could just do that. This gets annoying though when swapping bulbs. Maybe I want that LIFX bulb in the bathroom now, and to move my bathroom Yeelight into the living room where the LIFX was. It's do able, but now you have to edit existing entity IDs which is much harder than just changing the ID when you add it. OK. So what else you got?

Well what about template entities? Yes. These will work. For sure. You can make a template light for every light in your home and evaluate the underlying physical light's attributes. But come on! This is a HUGE pain. And templates aren't easy for everyone. They're an advanced feature, and unless you want something more than an alias, you can do better. Templates would make sense if you wanted all lights to support the same effect (like "rotate color") but each physical light has different effect names that you can use to do that. A template light is a great way to solve that problem.

Ok, so what can we do that's simple, fast, and effective. Light Groups. Light groups show up like any other light entity. They can be given names. And their features are a superset of their child lights. So, just make a light group with a single physical bulb. In all your automations / other light groups, etc you can reference this alias group. Now if I swap out my physical bulb, I only have to edit the config file with my alias group. I simply change the single entity in that group and BAM! All other groups / automations / love lace UI / Google home all still work! Well what about things other than lights? Well many group types exist. Stay as specific as possible. For example, putting lights into a normal group will lose the ability to have them be controlled as a light in your lovelace UI. But putting them into a Light Group makes them still show up as a light. For switches, normal groups work fine. For speakers, universal media players act as a group, and for notifications use notification groups. That way if you get a new phone, just replace the phone entity in your notification group. Most things in Home Assistant can go into groups of some kind, however not everything will and still maintain it's functionality. For most of these cases you can use template entities. And of course not everything needs to be given an alias. If you only change out your phone every 4 years, maybe it's not a big deal to swap out every reference. Maybe it's not worth the upfront cost of creating all the groups.
